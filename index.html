<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Art Web Editor (10x10) with Labels</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
  text-align: center;
  user-select: none; /* Prevent text selection */
}

#tools {
  margin-bottom: 10px;
}

button.tool {
  margin: 5px;
  padding: 6px 12px;
  border: 2px solid black;
  background-color: #eee;
  cursor: pointer;
}

button.tool.selected {
  background-color: #aaa;
  font-weight: bold;
}

#colorPalette {
  display: inline-block;
  margin-left: 10px;
}

.color {
  width: 24px;
  height: 24px;
  display: inline-block;
  margin: 2px;
  border: 2px solid #000;
  cursor: pointer;
  box-sizing: border-box;
}

.color.selected {
  border: 4px solid white;
}

#container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 10px;
}

#gridWrapper {
  display: grid;
  grid-template-columns: 20px repeat(10, 60px);
  grid-template-rows: 20px repeat(10, 60px);
  gap: 0;
}

.label-top, .label-left {
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  user-select: none; /* prevent highlight on click-drag */
}

.pixel {
  width: 60px;
  height: 60px;
  border: 1px solid #ddd;
  box-sizing: border-box;
  cursor: pointer;
}

#output {
  width: 600px;
  height: 600px;
  font-family: monospace;
  margin-left: 10px;
}

#instructions-section {
  max-width: 600px;
  margin: 20px auto 0 auto;
  text-align: left;
  line-height: 1.5;
  border: 1px solid #ccc;
  padding: 10px;
  background-color: #f9f9f9;
}
</style>
</head>
<body>

<h1>Pixel Art Web Editor (10x10) with Labels</h1>

<div id="tools">
  Tool:
  <button class="tool" id="draw">Draw</button>
  <button class="tool" id="erase">Erase</button>
  <button class="tool" id="clear">Clear</button>
  <span id="colorPalette"></span>
  <button id="export">Export Array for Game</button>
</div>

<div id="container">
  <div id="gridWrapper"></div>
  <textarea id="output" placeholder="Array code will appear here"></textarea>
</div>

<div id="instructions-section">
  <h3>Instructions:</h3>
  <ul>
    <li>Paint pixels with the "Draw" tool and remove them with "Erase".</li>
    <li>Drag your mouse to paint multiple pixels at once.</li>
    <li>Column labels (A–J) and row labels (1–10) are on the outside.</li>
    <li>After designing, click "Export Array for Game".</li>
    <li>Copy the code from the right-hand textarea and paste it into your game or project where a 10x10 pixel array is needed.</li>
  </ul>
</div>

<script>
const gridWrapper = document.getElementById('gridWrapper');
const output = document.getElementById('output');
const colorPaletteContainer = document.getElementById('colorPalette');

let currentColor = '#000000';
let currentTool = 'draw';
const colors = ['#000000','#ff0000','#00ff00','#0000ff','#ffff00','#ff00ff','#00ffff'];

// Columns for top labels
const cols = ['A','B','C','D','E','F','G','H','I','J'];

// Create color palette
let colorDivs = [];
colors.forEach(c => {
  const div = document.createElement('div');
  div.classList.add('color');
  div.style.backgroundColor = c;
  div.addEventListener('click', () => {
    currentColor = c;
    colorDivs.forEach(cd => cd.classList.remove('selected'));
    div.classList.add('selected');
  });
  colorPaletteContainer.appendChild(div);
  colorDivs.push(div);
});
colorDivs[0].classList.add('selected');

// Create grid with external labels
const pixelArray = [];

// Top-left empty cell
gridWrapper.appendChild(document.createElement('div'));

// Top labels
cols.forEach(c => {
  const label = document.createElement('div');
  label.classList.add('label-top');
  label.textContent = c;
  gridWrapper.appendChild(label);
});

// Rows
for(let y=0; y<10; y++){
  // Left label
  const rowLabel = document.createElement('div');
  rowLabel.classList.add('label-left');
  rowLabel.textContent = y+1;
  gridWrapper.appendChild(rowLabel);

  // Pixels
  for(let x=0; x<10; x++){
    const div = document.createElement('div');
    div.classList.add('pixel');
    div.style.backgroundColor = '#ffffff';
    div.dataset.x = x;
    div.dataset.y = y;
    gridWrapper.appendChild(div);
    pixelArray.push(div);
  }
}

// Tool buttons
const drawBtn = document.getElementById('draw');
const eraseBtn = document.getElementById('erase');
const clearBtn = document.getElementById('clear');

function selectTool(tool){
  currentTool = tool;
  [drawBtn, eraseBtn].forEach(btn => btn.classList.remove('selected'));
  if(tool === 'draw') drawBtn.classList.add('selected');
  if(tool === 'erase') eraseBtn.classList.add('selected');
}

drawBtn.addEventListener('click', ()=> selectTool('draw'));
eraseBtn.addEventListener('click', ()=> selectTool('erase'));
clearBtn.addEventListener('click', () => {
  pixelArray.forEach(p => p.style.backgroundColor = '#ffffff');
  output.value = '';
});

// Drawing logic
let isDrawing = false;

gridWrapper.addEventListener('mousedown', e => {
  if(!e.target.classList.contains('pixel')) return;
  isDrawing = true;
  handlePixel(e.target);
});
gridWrapper.addEventListener('mouseup', () => isDrawing = false);
gridWrapper.addEventListener('mouseleave', () => isDrawing = false);
gridWrapper.addEventListener('mousemove', e => {
  if(!isDrawing || e.buttons !== 1) return;
  if(!e.target.classList.contains('pixel')) return;
  handlePixel(e.target);
});

function handlePixel(pixel){
  if(currentTool==='draw'){
    pixel.style.backgroundColor = currentColor;
  } else if(currentTool==='erase'){
    pixel.style.backgroundColor = '#ffffff';
  }
}

// Convert "rgb(r,g,b)" to hex
function rgbToHex(rgb){
  const result = /^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(rgb);
  if(!result) return '#000000';
  return '#' + [1,2,3].map(i => {
    const hex = parseInt(result[i]).toString(16);
    return hex.length === 1 ? '0'+hex : hex;
  }).join('');
}

// Export function
document.getElementById('export').addEventListener('click', () => {
  const colorMap = {
    '#000000': 'k',
    '#ff0000': 'r',
    '#00ff00': 'g',
    '#0000ff': 'b',
    '#ffff00': 'y',
    '#ff00ff': 'p',
    '#00ffff': 'c',
    '#ffffff': 'e'
  };

  let rows = [];
  for(let y=0; y<10; y++){
    let row = [];
    for(let x=0; x<10; x++){
      const idx = y*10 + x;
      const color = pixelArray[idx].style.backgroundColor;
      const hexColor = rgbToHex(color);
      row.push(colorMap[hexColor] || 'p');
    }
    rows.push('["' + row.join('","') + '"]');
  }
  output.value = rows.join(',\n');
});
</script>

</body>
</html>
